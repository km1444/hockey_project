{% extends 'base.html' %}
{% load static %}

{% block description %}
  <meta name="description" content="Все сезоны {{ team }} {{ team.city }} в высшем эшелоне советского хоккея">
{% endblock %}

{% block title %}
  {{ team }} Хоккейный клуб СССР
{% endblock %}

{% block content %}


  {% include 'includes/header_team.html' %}

  {% include 'includes/submenu_team.html' %}

  <div class="container col-sm-6 p-1 my-1">
    <h1 align="left"> {{ count_season }} Seasons</h1>
  </div>

  <div class="container col-sm-6 p-1 my-1 table-responsive">
    <table class="table table-striped table-bordered table-hover table-sm">
      <thead>
        <tr>
        <th>Season</th>
        <th>Team</th>
        <th>GP</th>
        <th>W</th>
        <th>T</th>
        <th>L</th>
        <th>PTS</th>
        <th>PTS%</th>
        <th>Finish</th>
        <th>Playoffs</th>
        <th>Coaches</th>
        </tr>
      </thead>
      <tbody>
        {% for team in team_view_general %}
          <tr>
              <td><a href="{% url 'rating:create_table' team.season.name %}">{{ team.season }}</a></td>
              <td>{{ team.current_name }}</td>
              <td>{{ team.games }}</td>
              <td>{{ team.wins }}</td>
              <td>{{ team.ties }}</td>
              <td>{{ team.losses }}</td>
              <td><b>{{ team.points }}</b></td>
              <td>{{ team.points_percentage }}</td>
              <td>{{ team.rank }}</td>
              <td>{{ team.playoff.result }}</td>
              <td>{{ team.coach }}</td>
          </tr>
            {% if team.round_2 %}
              {% if team.round_2.table1 %}
                <tr>
                  <td></td>
                  <td>{{ team.round_2.table1.current_name }}</td>
                  <td>{{ team.round_2.table1.games }}</td>
                  <td>{{ team.round_2.table1.wins }}</td>
                  <td>{{ team.round_2.table1.ties }}</td>
                  <td>{{ team.round_2.table1.losses }}</td>
                  <td><b>{{ team.round_2.table1.points }}</b></td>
                  <td>{{ team.round_2.table1.points_percentage }}</td>
                  <td>{{ team.round_2.table1.rank }}</td>
                  <td>{{ team.playoff.table1.result}}</td>
                  <td>{{ team.round_2.table1.coach }}</td>
                </tr>
              {% elif team.round_2.table2 %}
              <tr>
              <td></td>
              <td>{{ team.round_2.table2.current_name }}</td>
              <td>{{ team.round_2.table2.games }}</td>
              <td>{{ team.round_2.table2.wins }}</td>
              <td>{{ team.round_2.table2.ties }}</td>
              <td>{{ team.round_2.table2.losses }}</td>
              <td><b>{{ team.round_2.table2.points }}</b></td>
              <td>{{ team.round_2.table2.points_percentage }}</td>
              <td>{{ team.round_2.table2.rank }}</td>
              <td>{{ team.playoff.table2.result}}</td>
              <td>{{ team.round_2.table2.coach }}</td>
              </tr>
              {% elif team.round_2.table3 %}
              <tr>
                <td></td>
                <td>{{ team.round_2.table3.current_name }}</td>
                <td>{{ team.round_2.table3.games }}</td>
                <td>{{ team.round_2.table3.wins }}</td>
                <td>{{ team.round_2.table3.ties }}</td>
                <td>{{ team.round_2.table3.losses }}</td>
                <td><b>{{ team.round_2.table3.points }}</b></td>
                <td>{{ team.round_2.table3.points_percentage }}</td>
                <td>{{ team.round_2.table3.rank }}</td>
                <td>{{ team.playoff.table3.result}}</td>
                <td>{{ team.round_2.table3.coach }}</td>
              </tr>
              {% endif %}
            {% endif %}
          {% endfor %}
      </tbody>
    </table>
  </div>

  <nav>
    <div class="nav nav-tabs" id="nav-tab" role="tablist">
      <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Главная</button>
      <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false" a href="{% url 'rating:season_leaders' team %}">Профиль</button>
      <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">Контакт</button>
    </div>
  </nav>
  <div class="tab-content" id="nav-tabContent">
    <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
      <div class="container col-sm-6 p-1 my-1">
        <h1 align="left"> {{ count_season }} Seasons</h1>
      </div>
    
      <div class="container col-sm-6 p-1 my-1 table-responsive">
        <table class="table table-striped table-bordered table-hover table-sm">
          <thead>
            <tr>
            <th>Season</th>
            <th>Team</th>
            <th>GP</th>
            <th>W</th>
            <th>T</th>
            <th>L</th>
            <th>PTS</th>
            <th>PTS%</th>
            <th>Finish</th>
            <th>Playoffs</th>
            <th>Coaches</th>
            </tr>
          </thead>
          <tbody>
            {% for team in team_view_general %}
              <tr>
                  <td><a href="{% url 'rating:create_table' team.season.name %}">{{ team.season }}</a></td>
                  <td>{{ team.current_name }}</td>
                  <td>{{ team.games }}</td>
                  <td>{{ team.wins }}</td>
                  <td>{{ team.ties }}</td>
                  <td>{{ team.losses }}</td>
                  <td><b>{{ team.points }}</b></td>
                  <td>{{ team.points_percentage }}</td>
                  <td>{{ team.rank }}</td>
                  <td>{{ team.playoff.result }}</td>
                  <td>{{ team.coach }}</td>
              </tr>
                {% if team.round_2 %}
                  {% if team.round_2.table1 %}
                    <tr>
                      <td></td>
                      <td>{{ team.round_2.table1.current_name }}</td>
                      <td>{{ team.round_2.table1.games }}</td>
                      <td>{{ team.round_2.table1.wins }}</td>
                      <td>{{ team.round_2.table1.ties }}</td>
                      <td>{{ team.round_2.table1.losses }}</td>
                      <td><b>{{ team.round_2.table1.points }}</b></td>
                      <td>{{ team.round_2.table1.points_percentage }}</td>
                      <td>{{ team.round_2.table1.rank }}</td>
                      <td>{{ team.playoff.table1.result}}</td>
                      <td>{{ team.round_2.table1.coach }}</td>
                    </tr>
                  {% elif team.round_2.table2 %}
                  <tr>
                  <td></td>
                  <td>{{ team.round_2.table2.current_name }}</td>
                  <td>{{ team.round_2.table2.games }}</td>
                  <td>{{ team.round_2.table2.wins }}</td>
                  <td>{{ team.round_2.table2.ties }}</td>
                  <td>{{ team.round_2.table2.losses }}</td>
                  <td><b>{{ team.round_2.table2.points }}</b></td>
                  <td>{{ team.round_2.table2.points_percentage }}</td>
                  <td>{{ team.round_2.table2.rank }}</td>
                  <td>{{ team.playoff.table2.result}}</td>
                  <td>{{ team.round_2.table2.coach }}</td>
                  </tr>
                  {% elif team.round_2.table3 %}
                  <tr>
                    <td></td>
                    <td>{{ team.round_2.table3.current_name }}</td>
                    <td>{{ team.round_2.table3.games }}</td>
                    <td>{{ team.round_2.table3.wins }}</td>
                    <td>{{ team.round_2.table3.ties }}</td>
                    <td>{{ team.round_2.table3.losses }}</td>
                    <td><b>{{ team.round_2.table3.points }}</b></td>
                    <td>{{ team.round_2.table3.points_percentage }}</td>
                    <td>{{ team.round_2.table3.rank }}</td>
                    <td>{{ team.playoff.table3.result}}</td>
                    <td>{{ team.round_2.table3.coach }}</td>
                  </tr>
                  {% endif %}
                {% endif %}
              {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
      <div class="container col-5 p-1 my-1">
        <h2 align="center">Season Leaders</h2>
      </div>
        <div class="container-lg">
        <div class="row">
          <div class="col">
          <table class="table table-striped table-bordered table-hover table-sm tcont countLines" style="box-shadow: 0 0 0 0">
            <thead>
              <h5>
                Goals
              </h5>
            </thead>
            <tbody>
              {% for elem in top_10_goal %}
              <tr class="first_place">			
                <td class="rank">.</td>
                <td class="first"><a href="{% url 'rating:player_detail' elem.name__id %}">{{ elem.name__name }}</a></td>
                <td>{{ elem.season__name }}</td>
                <td class="value"> {{ elem.goal }} </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          </div>
          <div class="col">
          <table class="table table-striped table-bordered table-hover table-sm tcont countLines" style="box-shadow: 0 0 0 0">
            <thead>
              <h5>
                Assists
              </h5>
            </thead>
            <tbody>
              {% for elem in top_10_assist %}
              <tr class="first_place">			
                <td class="rank">.</td>
                <td class="first"><a href="{% url 'rating:player_detail' elem.name__id %}">{{ elem.name__name }}</a></td>
                <td>{{ elem.season__name }}</td>
                <td class="value"> {{ elem.assist }} </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          </div>
          <div class="col">
          <table class="table table-striped table-bordered table-hover table-sm tcont countLines" style="box-shadow: 0 0 0 0">
            <thead>
              <h5>
                Points
              </h5>
            </thead>
            <tbody>
              {% for elem in top_10_point %}
              <tr class="first_place">			
                <td class="rank">.</td>
                <td class="first"><a href="{% url 'rating:player_detail' elem.name__id %}">{{ elem.name__name }}</a></td>
                <td>{{ elem.season__name }}</td>
                <td class="value"> {{ elem.point }} </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          </div>
          <div class="col">
          <table class="table table-striped table-bordered table-hover table-sm tcont countLines" style="box-shadow: 0 0 0 0">
            <thead>
              <h5>
                Penalty
              </h5>
            </thead>
            <tbody>
              {% for elem in top_10_penalty %}
              <tr class="first_place">			
                <td class="rank">.</td>
                <td class="first"><a href="{% url 'rating:player_detail' elem.name__id %}">{{ elem.name__name }}</a></td>
                <td>{{ elem.season__name }}</td>
                <td class="value"> {{ elem.penalty }} </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">...</div>
  </div>

{% endblock %}
